---
layout: post
title: Docker 란
tags: [Docker, Dev, Linux]
categories:
    - Docker
permalink: docker.html
createat: 2020-05-15
---

### 컨테이너는 가상머신인가?

```
각각의 VM = 서로 다른 환경
각각의 컨테이너 = 서로 다른 환경
```

여기까지 보면 VM 과 Container는 같은 말 같지만  
VM 은 하드웨어 가상화를 지향 즉 소프트웨어로 구현된 하드웨어라고 한다면,  
컨테이너는 하드웨어 가상화가 아니고 격리된 환경에서 프로세스를 실행하면서 os 에서 지원하는 기능을 사용하는 것을 말합니다.  
하드웨어 가상화 없이 격리된 환경에서 실행되는 프로세스. 즉 리눅스의 커널에서 제공하는 프로세스가 실행되는 격리된 환경이라 할 수 있습니다.

### 컨테이너

도커 컨테이너는 다음과 같은 기술들을 이용하여 구현됩니다.

```
cgroups
namespaces
netlink
selinux
netfilter
capabilities
```

### 이미지

도커 이미지란 특정 프로세스를 실행하기 위한 환경을 일컷습니다.  
프로세스가 실행되기 위한 환경이란 계층화된 파일 시스템이라는 것이고,  
도커 이미지는 각 프로세스가 실행되기 위한 파일들의 집합입니다.  
즉 프로세스가 실행되는 환경도 결국 파일들의 집합과 같다는 것을 알 수 있습니다.

### 아키텍처

리눅스 머신
컨테이너를 네이티브하게 지원  
macos의 가상화 방식 (경량 가상머신)  
컨테이너 = xhyve(엑스하이브)의 프로세스  
macos -> xhyve(server, container)

### 컨테이너 가상화가 필요한 이유

도커 이미지란 프로세스가 작동되는 상태를 의미합니다.  
서로 다른 환경(맥, 윈도우, 리눅스)에서 이미지로 만들면, 이 이미지는 프로세스가 작동하는 것이 보증되기 때문에 서로 공유가 가능합니다.  
따라서 다음과 같이 생각하면 도커를 이해하기 쉽습니다.

1. 뽕맞은 chroot
2. 초 강력한 포터블 앱
